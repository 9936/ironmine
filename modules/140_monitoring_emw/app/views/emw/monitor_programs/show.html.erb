<%= common_title %>
<!--页面结构-->
<div class="show-block">
  <table class="page-block-header"><tr>
    <td class="page-block-title">
      <h2 class="block-title"><%= t(:label_emw_monitor_program) %></h2>
    </td>
    <td class="page-block-button">
      <%= link_to t(:edit), {:action => "edit", :id => @monitor_program},:class=>"btn btn-primary"%>
      <%= link_to t(:back), {:action => "index"},:class=>"btn" %>
    </td>
  </tr></table>
  <div class="page-block-body">
    <table class="show-table">
      <tbody>
      <tr>
        <td class="label-col"><label><%= t(:name) %></label></td>
        <td class="data-col"><%= @monitor_program[:name] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>

      <tr>
        <td class="label-col"><label><%= t(:label_emw_monitor_program_assigned_to) %></label></td>
        <td class="data-col"><%= @monitor_program[:full_name] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>

      <tr>
        <td class="label-col"><label><%= t(:label_emw_monitor_program_mail_alert) %></label></td>
        <td class="data-col"><%= @monitor_program[:mail_alert_name] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>

      <tr>
        <td class="label-col"><label><%= t(:label_emw_monitor_program_start_at) %></label></td>
        <td class="data-col"><%= @monitor_program[:start_at] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>

      <tr>
        <td class="label-col"><label><%= t(:label_emw_monitor_program_end_at) %></label></td>
        <td class="data-col"><%= @monitor_program[:end_at] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>

      <tr>
        <td class="label-col"><label><%= t(:label_emw_monitor_program_repeat_type) %></label></td>
        <td class="data-col"><%= rule_meaning(@monitor_program) %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>

      <tr>
        <td class="label-col"><label><%= t(:description) %></label></td>
        <td class="data-col"><%= @monitor_program[:description] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<!--页面结构-->
<div class="page-block">
  <table class="page-block-header"><tr>
    <td class="page-block-title">
      <h2 class="block-title"><%= t(:label_emw_monitor_program_list) %></h2>
    </td>
    <td class="page-block-button">
      <%= link_to t(:new), {:controller => "emw/connections",:action => "new", :program_id => @monitor_program.id},:class=>"btn btn-primary"%>
    </td>
    <td class="page-block-help">
      <div id="searchBox"></div>
    </td>
  </tr></table>
  <div class="page-block-body">
    <%= datatable("program_connections",{:controller => "emw/connections", :action=>"get_data", :program_id => @monitor_program.id},[],{:search_box=>"searchBox",:paginator_box=>"paginator"})%>
  </div>
</div>


<!--页面结构-->
<div class="page-block">
  <table class="page-block-header"><tr>
    <td class="page-block-title">
      <h2 class="block-title"><%= t(:label_emw_monitor_program_target) %></h2>
    </td>
    <td class="page-block-button"></td>
    <td class="page-block-help">
      <%= form_tag({:controller => "emw/monitor_programs", :action => "add_target", :_dom_id=>"monitor_targets"},{:class => "form-inline",:remote=>true,:builder => CustomFormBuilder}) do %>
          <div class="float-right" style="margin-left: 20px;">
            <%= link_submit(t(:add), :class=>"btn") %>
          </div>
          <div style="float:right;">
            <%= select_tag_alias("target_type", monitor_targets, nil, :id => "monitorTargetType") %>
            <%= lov_field_tag "target_id", Emw::Interface, {:style=>"width:150px;", :lov_params=>{:lktkn=>"monitor_target", :monitor_program_id=> @monitor_program.id}}%>
          </div>
      <% end %>
    </td>
  </tr></table>
  <div class="page-block-body">
    <%= datatable("monitor_targets",{:controller => "emw/monitor_programs", :action=>"get_target_data" },[])%>
  </div>
</div>
