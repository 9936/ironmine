<%= common_title %>
<style type="text/css">

    .datatable table th {
        background: none;
        background-color: #efefef;
        background-image: -webkit-gradient(linear, 0 0%, 0 100%, from(#fdfdfd), to(#eaeaea));
        background-image: -webkit-linear-gradient(top, #fdfdfd 0%, #eaeaea 100%);
        background-image: -moz-linear-gradient(top, #fdfdfd 0%, #eaeaea 100%);
        background-image: -ms-linear-gradient(top, #fdfdfd 0%, #eaeaea 100%);
        background-image: -o-linear-gradient(top, #fdfdfd 0%, #eaeaea 100%);
        background-image: -linear-gradient(top, #fdfdfd 0%, #eaeaea 100%);
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#fdfdfd', endColorstr = '#eaeaea', GradientType = 0); /* IE6-9 */
        border-bottom: 1px solid #CDCDCD;
        height: 30px;
        border-right: none;
    }

    .datatable table th, .datatable table th a {
        vertical-align: middle;
    }
    .datatable table th:first-child,
    .datatable table td:first-child {
        padding-left: 5px;
    }
</style>

<!--页面结构-->
<div class="show-block">
  <table class="page-block-header"><tr>
    <td class="page-block-title">
      <h2 class="block-title"><%= t(:label_emw_interface) %></h2>
    </td>
    <td class="page-block-button">
      <%= link_to t(:edit), {:action => "edit", :id => @interface},:class=>"btn btn-primary"%>
      <%= link_to t(:back), {:action => "index"},:class=>"btn" %>
    </td>
  </tr></table>
  <div class="page-block-body">
    <table class="show-table">
      <tbody>
      <tr>
        <td class="label-col"><label><%= t(:name) %></label></td>
        <td class="data-col"><%= @interface[:name] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>
      <tr>
        <td class="label-col"><label><%= t(:label_emw_interface_module) %></label></td>
        <td class="data-col"><%= "#{@interface[:module_name]}(#{@interface[:module_code]})" %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>
      <tr>
        <td class="label-col"><label><%= t(:description) %></label></td>
        <td class="data-col"><%= @interface[:description] %></td>
        <td class="label-col empty">&nbsp;</td>
        <td class="data-col empty">&nbsp;</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
<!--页面结构-->
<div class="page-block">
  <table class="page-block-header"><tr>
    <td class="page-block-title">
      <h2 class="block-title"><%= t(:label_emw_interface_table) %></h2>
    </td>
    <td class="page-block-button">
      <%= link_to t(:new), {:controller => "emw/interface_tables", :action => "new", :interface_id => @interface.id },:class=>"btn btn-success", :rel => "modal" %>
    </td>
    <td class="page-block-help">
      <%= link_to t(:label_emw_interface_table_import), {:controller => "emw/interface_tables", :action => "import", :interface_id => @interface.id },:class=>"btn btn-success", :rel => "modal" %>
    </td>
  </tr></table>
  <div class="page-block-body">
    <div class="datatable" style="background-color: #fff;">
      <table>
        <thead>
        <tr>
          <th style="width: 120px;"><%= t(:operation) %></th>
          <th><%= t(:name) %></th>
          <th><%= t(:label_emw_interface_table_name) %></th>
          <th><%= t(:label_emw_interface_table_error) %></th>
          <th><%= t(:description) %></th>
        </tr>
        </thead>
        <tbody>
        <% @interface.interface_tables.each do |table| %>
          <tr>
            <td>
              <%= link_to(t(:edit), {:controller => "emw/interface_tables", :action => "edit", :id => table[:id],:interface_id => @interface.id}, {:class => "action-link", :rel => "modal"}) %>&nbsp;|
              <%= link_to(t(:label_emw_interface_table_add_column), {:controller => "emw/interface_columns", :action => "new", :table_id => table[:id]}, {:class => "action-link", :rel => "modal"}) %>&nbsp;|
              <%= link_to(t(:show), {:controller => "emw/interface_tables", :action => "show", :id => table[:id],:interface_id => @interface.id}, {:class => "action-link", :rel => "modal"}) %>
            </td>
            <td><%= table.name %></td>
            <td><%= table.table_name %></td>
            <td>
              <% if table.errors_table.present? %>
                <%= link_to(table.error_table,{:controller => "emw/error_tables", :action => "show",:id => table.errors_table.id, :table_id => table.id }, :class => "action-link")  %>
              <% else %>
                <%= link_to(t(:new), {:controller => "emw/error_tables", :action => "new", :table_id => table.id }, :class => "action-link", :rel => "modal") %>
              <% end %>
            </td>
            <td><%= table.description %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>

  </div>
</div>

<script type="text/javascript">
  function updateData(){
      location.reload();
  }
</script>
