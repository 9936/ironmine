<%= common_title() %>

<%= form_for(@product,:url=>{:action=>"update"},:as=>"cons_product",:builder => CustomFormBuilder,:html => {:id => 'update_cons_product' }) do |f| %>
    <% content_for :form_block_product   do%>
        <table class="form-table">
          <tbody>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_name)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_name,:required=>true) %></td>
            <td class="data-col">
              <div class="from-inline input-append">
                <%= f.text_field(:pro_customer_no,:required=>true,:class=>'input-medium')%>
                <a onclick="searchCustomerNo()" class="btn lov-btn" >
                  <i class="icon-search"></i>
                </a>
              </div>
            </td>
          </tr>
          <tr>
            <td class="label-col"><label><%=(t :label_pro_customer_contact)%></label></td>
            <td class="data-col">
              <div class="from-inline input-append">
                <%= f.text_field(:pro_customer_contact,:required=>true,:class=>'input-medium')%>
                <a onclick="searchCustomerContact()" class="btn lov-btn" >
                  <i class="icon-search"></i>
                </a>
              </div>
            </td>
            <td class="label-col"><label><%=(t :label_pro_manager)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_manager,:required=>true) %></td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_type)%></label></td>
            <td class="data-col">
              <%= f.blank_select(:pro_type,available_projectType,{},{:required=>true,:id=>"pro_type"})%>
            </td>
            <td class="label-col"><label><%=t(:label_pro_pricing_type)%></label></td>
            <td class="data-col">
              <%= f.blank_select(:pro_pricing_type,available_price,{},{:required=>true,:id=>"pro_pricing_type"})%>
            </td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_begin_date)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_begin_date,:required=>true) %></td>
            <td class="label-col"><label><%=(t :label_pro_end_date)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_end_date,:required=>true) %></td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_comment)%></label></td>
            <td class="data-col"><%= f.text_area(:pro_comment) %></td>
            <td class="label-col"><label><%=t(:label_pro_disabled_flag)%></label></td>
            <td class="data-col"><%=f.check_box :pro_disabled_flag%></td>
          </tr>
          </tbody>
        </table>
    <% end %>
    <% content_for :form_people_day   do%>
        <table class="form-table">
          <tbody>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_remote_date)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_remote_date) %></td>
            <td class="label-col"><label><%=(t :label_pro_scene_date)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_scene_date) %></td>
          </tr>
          </tbody>
        </table>
    <% end %>
    <% content_for :form_SLA_mess   do%>
        <table class="form-table">
          <tbody>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_respond_time)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_respond_time) %></td>
            <td class="label-col"><label><%=(t :label_pro_handle_time)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_handle_time) %></td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_update_time)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_update_time) %></td>
            <td class="label-col"><label><%=(t :label_pro_total_time)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_total_time) %></td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_max_time)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_max_time) %></td>
            <td class="label-col"><label><%=(t :label_pro_remind_rate)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_remind_rate) %></td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_pro_warning_rate)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_warning_rate) %></td>
            <td class="label-col"><label><%=(t :label_pro_show_to_SLA_flag)%></label></td>
            <td class="data-col"><%= f.text_field(:pro_show_to_SLA_flag) %></td>
          </tr>
          </tbody>
        </table>
    <% end %>
    <% content_for :form_buttons  do %>
        <%= link_submit t(:save),{:class=>"btn btn-primary save"}%>
        <%= link_to t(:cancel), {:action => "index"}, {:class => "btn cancel"}%>
    <% end %>
    <!--页面结构-->
    <div class="page-block">
      <table class="page-block-header">
        <tr>
          <td class="page-block-title">
            <h2 class="block-title"><%= t(:label_product_new) %></h2>
          </td>
          <td class="page-block-button">
            <%= content_for :form_buttons   %>
          </td>
          <td class="page-block-help">

          </td>
        </tr>
      </table>
      <%= error_for @product %>
      <div class="page-block-body">
        <div class="sub-page-block">
          <!-- 个人信息 -->
          <div class="sub-page-block-header">
            <%= form_require_info %>
            <h3 class="sub-page-block-title"><%=t(:label_product_info)%></h3>
          </div>
          <div class="sub-page-block-body">
            <%= content_for :form_block_product   %>
          </div>

          <div class="sub-page-block-header">
            <%= form_require_info %>
            <h3 class="sub-page-block-title"><%=t(:label_people_day_info)%></h3>
          </div>
          <div class="sub-page-block-body">
            <%= content_for :form_people_day   %>
          </div>

          <div class="sub-page-block-header">
            <%= form_require_info %>
            <h3 class="sub-page-block-title"><%=t(:label_SLA_mess_info)%></h3>
          </div>
          <div class="sub-page-block-body">
            <%= content_for :form_SLA_mess   %>
          </div>

        </div>
      </div>

      <table class="page-block-footer">
        <tr>
          <td class="page-block-title"></td>
          <td class="page-block-button">
            <%= content_for :form_buttons   %>
          </td>
        </tr>
      </table>
    </div>
<% end %>


<div class="modal fade" id="noModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
        aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">客户编号</h4>
      </div>
      <div class="modal-body" id="indicator">
        <div class="page-block">
          <table class="page-block-header"><tr>
            <td class="page-block-title">
            </td>
            <td class="page-block-help">
              <div id="searchBox"></div>
            </td>
          </tr></table>
          <div class="page-block-body">
            <%= datatable("customer",{:controller => "cons/customer", :action=>"searchCustomerNo"},[],{:search_box=>"searchBox",:paginator_box=>"paginatorBox"})%>
          </div>
        </div>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>

<script>
    $(function(){
        $("#cons_product_pro_begin_date,#cons_product_pro_end_date").datepicker()
        $("#cons_product_pro_comment").css("height","100px")
        $("#update_cons_product a.save").click(function(){
            $("#update_cons_product").attr('action', '<%= url_for(:action => "update", :controller => "cons/product", :next_action => "add_system")%>');
            $("#update_cons_product").submit();
        });
    })
    function searchCustomerNo(){
      $("#noModal").modal("show")
    }

</script>