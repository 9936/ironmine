<%= common_title(:action_meaning=>t(:label_isp_program_new_execute)) %>
<%= form_for(@program, :url => {:action => "create_execute"}, :builder => CustomFormBuilder) do |f| %>
    <% content_for :form_block_common do %>
        <table class="show-table">
          <tbody>
          <tr>
            <td class="label-col"><label><%= t(:name) %></label></td>
            <td class="data-col"><%= @program[:name] %></td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
          <tr>
            <td class="label-col"><label><%= t(:description) %></label></td>
            <td class="data-col">
              <div><%= @program[:description] %></div>
            </td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
          </tbody>
        </table>
    <% end %>
    <% content_for :form_block_connection do %>
        <div class="datatable">
          <table>
            <thead>
            <tr>
              <th style="width:30px">
                <div><%= t(:name) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_connection_type) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_connection_host) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_connection_username) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_connection_password) %></div>
              </th>
            </tr>
            </thead>
            <tbody>
            <%= f.fields_for :connections, :builder => CustomFormBuilder do |c_f| %>
                <tr>
                  <td>
                    <div><%= c_f.object.name %></div>
                  </td>

                  <td>
                          <span>
                            <div>
                              <div><%= c_f.object.connect_type %></div>
                            </div>
                          </span>
                  </td>
                  <td>
                          <span>
                            <div>
                              <div><%= c_f.object.host %></div>
                            </div>
                          </span>
                  </td>
                  <td>
                          <span>
                            <div> <%= c_f.text_field :username, :required => true, :size => 20 %></div>
                          </span>
                  </td>
                  <td>
                          <span>
                            <div> <%= c_f.text_field :password, :required => true, :size => 20 %></div>
                          </span>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>
    <% end %>
    <% content_for :form_block_param do %>
        <div class="datatable">
          <table>
            <thead>
            <tr>
              <th style="width:30px">
                <div><%= t(:name) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_parameter_object_symbol) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_parameter_data_type) %></div>
              </th>
              <th style="width:30px">
                <div><%= t(:label_isp_parameter_value) %></div>
              </th>
            </tr>
            </thead>
            <tbody>
            <%= f.fields_for :check_parameters, :builder => CustomFormBuilder do |c_f| %>
                <tr>
                  <td>
                    <div><%= c_f.object.name %></div>
                  </td>

                  <td>
                              <span>
                                <div>
                                  <div><%= c_f.object.object_symbol %></div>
                                </div>
                              </span>
                  </td>
                  <td>
                              <span>
                                <div>
                                  <div><%= c_f.object.data_type %></div>
                                </div>
                              </span>
                  </td>
                  <td>
                              <span>
                                <div> <%= c_f.text_field :value, :required => true, :size => 20 %></div>
                              </span>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>
    <% end %>
    <% content_for :form_buttons do %>
        <%= link_submit t(:save), {:class => "btn btn-primary"} %>
        <%= link_back t(:cancel), {}, {:class => "btn cancel"} %>
    <% end %>
    <!--页面结构-->
    <div class="page-block">
      <table class="page-block-header">
        <tr>
          <td class="page-block-title">
            <h2 class="block-title"><%= t(:label_isp_program_new) %></h2>
          </td>
          <td class="page-block-button">
            <%= content_for :form_buttons %>

          </td>
        </tr>
      </table>
      <div class="page-block-body">
        <%= error_for @program %>
        <div class="sub-page-block">
          <div class="sub-page-block-header">
            <%= form_require_info %>
            <h3 class="sub-page-block-title"><%= t(:label_common_info) %></h3>
          </div>
          <div class="sub-page-block-body">
            <%= content_for :form_block_common %>
          </div>
        </div>

      </div>
      <div class="page-block-body">
        <div class="sub-page-block">
          <div class="sub-page-block-header">
            <h3 class="sub-page-block-title"><%= t(:label_common_info) %></h3>
          </div>
          <div class="sub-page-block-body">
            <%= content_for :form_block_connection %>
          </div>
        </div>

      </div>
      <div class="page-block-body">
        <div class="sub-page-block">
          <div class="sub-page-block-header">
            <h3 class="sub-page-block-title"><%= t(:label_common_info) %></h3>
          </div>
          <div class="sub-page-block-body">
            <%= content_for :form_block_param %>
          </div>
        </div>

      </div>

      <table class="page-block-footer">
        <tr>
          <td class="page-block-title">
          </td>
          <td class="page-block-button">
            <%= content_for :form_buttons %>
          </td>
        </tr>
      </table>
    </div>
<% end %>
