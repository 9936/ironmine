<%= common_title %>
<%= stylesheet_link_tag "/javascripts/yui3.3/datatable/assets/skins/sam/datatable.css"%>
<div class="listRelatedObject setupBlock">
    <div class="bPageBlock">
      <div class="pbHeader">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            <tr>
              <td class="pbTitle"><h2 class="mainTitle"><%= t(:label_irm_group_list) %></h2></td>
              <td id="topButtonRow" class="pbButton">
                <div class="button"><%= link_to t(:new), {:controller => "irm/groups", :action => "new"}%></div>
              </td>
              <td class="pbHelp">
                <div id="rolesSearchBox"></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="pbBody">
          <div class="datatable">
            <div class="yui3-widget yui3-datatable">
              <div class="yui3-datatable-content">
                  <table id='rows' cellspacing="0" cellpadding="0" class='grid'>
                    <thead class="yui3-datatable-columns">
                      <tr class="yui3-datatable-first yui3-datatable-last">
                        <th class="yui3-column" style="width:100px;">
                          <div class="yui3-datatable-liner"><%= t(:operation) %>
                          </div>
                        </th>

                        <th class="yui3-column" style="width:200px;">
                          <div class="yui3-datatable-liner"><%= t(:label_irm_group_name) %>
                          </div>
                        </th>
                        <th class="yui3-column" style="width:120px;">
                          <div class="yui3-datatable-liner"><%= t(:label_irm_group_parent) %>
                          </div>
                        </th>
                        <th class="yui3-column" style="width:120px;">
                          <div class="yui3-datatable-liner"><%= t(:label_irm_group_description) %>
                          </div>
                        </th>
                      </tr>
                    </thead>
                    <tbody class="yui3-datatable-data">
                    <% @leveled_groups.each do |group| %>
                    <tr id="<%=group.id%>" class="yui3-datatable-even">
                      <td class="yui3-column">
                        <div class='yui3-datatable-liner'>
                          <%= link_to(t(:edit),{:action=>"edit",:id=>group.id}) %>
                          <%= link_to(t(:show),{:action=>"show",:id=>group.id}) %>
                         </div>
                      </td>

                      <td class="yui3-column">
                        <div class='yui3-datatable-liner'>
                           <% (group.level - 1).times do %>&nbsp;&nbsp;&nbsp;&nbsp;<%end%><%= group[:name] %>(<%= group.code %>)
                        </div>
                      </td>
                      <td class="yui3-column">
                        <div class='yui3-datatable-liner'>
                           <%= group[:parent_group_name] %>
                        </div>
                      </td>

                      <td class="yui3-column">
                        <div class='yui3-datatable-liner'>
                           <%= group[:description] %>
                        </div>
                      </td>

                    </tr>
                    <% end -%>
                    </tbody>
                  </table>
              </div>
            </div>
          </div>
      </div>
    </div>
</div>