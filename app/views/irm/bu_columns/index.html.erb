<%= common_title %>
<div class="listRelatedObject setupBlock">
    <div class="page-block">
      <div class="pbHeader">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            <tr>
              <td class="pbTitle"><h2 class="mainTitle"><%= t(:label_irm_bu_column_list) %></h2></td>
              <td id="topButtonRow" class="pbButton">
                <div class="button"><%= link_to t(:new), {:action => "new"}%></div>
              </td>
              <td class="pbHelp">
                <div id="statusesSearchBox"></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="pbBody">
        <div class="pbWizardBody">
          <div class="secondary-palette">
            <div class="pbBody ">
                <div class="pbSubsection">
                  <table class="detailList" cellpadding="0" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                          <td style="width:18%">
                            <%= render :partial =>"/irm/common/tree_sidebar_template", :locals =>{:tree_url => url_for(:action=>"get_columns_data",  :format=>:json),
                                                                 :tree_id => "tree-div",
                                                                 :li_attrs => "id,sc_id,sc_code,column_name,column_description" } %>
                          </td>
                          <td class="data2Col">
                            <div id="ep" class="detail-block page-block">
                              <div class="pbHeader">
                                <table cellpadding="0" cellspacing="0" border="0">
                                  <tbody>
                                    <tr>
                                      <td class="pbTitle"></td>
                                      <td class="pbButton">
                                        <div class="button" id="edit_button"><%= link_to t(:edit), {}, {:onclick => "javascript:void(0)", :href=>"#"}%></div>
                                        <div class="button" id="new_child_button"><%= link_to t(:label_irm_bu_column_new_child), {}, {:onclick => "javascript:void(0)", :href=>"#"}%></div>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                              <div class="pbBody">
                                <div class="pbSubsection">
                                  <table class="detailList" cellpadding="0" cellspacing="0" border="0">
                                    <tbody>
                                        <tr>
                                          <td class="labelCol"><label><%=(t :label_irm_bu_column_code)%></label></td>
                                          <td class="data2Col" id="column_code"></td>
                                        </tr>
                                        <tr>
                                          <td class="labelCol"><label><%=(t :name)%></label></td>
                                          <td class="data2Col" id="column_name"></td>
                                        </tr>
                                        <tr>
                                          <td class="labelCol"><label><%=t(:description)%></label></td>
                                          <td class="data2Col" id="column_description"></td>
                                        </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>

                          </td>
                        </tr>
                    </tbody>
                  </table>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
      $("#tree-div").bind('nodeListener',function(event, element){
          $("#column_code").html(element.attr("sc_code"));
          $("#column_name").html(element.attr("column_name"));
          $("#column_description").html(element.attr("column_description"));
          $("#edit_button").html("<a href='/bu_columns/" + element.attr("sc_id") + "/edit'><%= t :edit%></a>");
          $("#new_child_button").html("<a href='/bu_columns/new?parent_column_id=" + element.attr("sc_id") +"'><%= t :label_irm_bu_column_new_child%></a>");
      });
  });
</script>