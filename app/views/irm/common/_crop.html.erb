<%= image_tag source.avatar.url(:original), :id => "crop_box" %>
<script type="text/javascript">
  GY.use("yui2-imagecropper", function(Y){

    var crop = new Y.YUI2.widget.ImageCropper('crop_box', {
        initialXY: [0, 0],
        keyTick: 1,
        shiftKeyTick: 50,
        minHeight: 16,
        minWidth: 16,
        initHeight: 45,
        initWidth: 45,
        ratio: true
    });

    crop.on("moveEvent",  function() {
        Y.one("#crop_x").set("value", crop.getCropCoords().left);
        Y.one("#crop_y").set("value", crop.getCropCoords().top);
        Y.one("#crop_w").set("value", crop.getCropCoords().width);
        Y.one("#crop_h").set("value", crop.getCropCoords().height);
    });
  });
</script>
