<%= setting_title %>
<script type="text/javascript" src="/javascripts/ext4-all.js"></script>
<link rel="stylesheet" type="text/css" href="/themes/salesforce2/stylesheets/ext4-all.css"></link>

<div class="listRelatedObject setupBlock">
    <div class="bPageBlock">
      <div class="pbHeader">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            <tr>
              <td class="pbTitle"><h2 class="mainTitle"><%= t(:label_skm_entry_status_list) %></h2></td>
              <td id="topButtonRow" class="pbButton">
                <div class="button"><%= link_to t(:new), {:action => "new"}%></div>
              </td>
              <td class="pbHelp">
                <div id="statusesSearchBox"></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="pbBody">
        <div class="pbWizardBody">
          <div class="secondaryPalette">
            <div class="pbBody ">
                <div class="pbSubsection">
                  <table class="detailList" cellpadding="0" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                          <td class="labelCol">
                            <div id="tree-div" href="<%= url_for(:action=>"get_columns_data",:format=>:json) %>"></div>
                          </td>
                          <td class="data2Col">
                            <div id="ep" class="bDetailBlock bPageBlock">
                              <div class="pbHeader">
                                <table cellpadding="0" cellspacing="0" border="0">
                                  <tbody>
                                    <tr>
                                      <td class="pbTitle"></td>
                                      <td class="pbButton">
                                        <div class="button"><%= link_to t(:edit), {}%></div>
                                        <div class="button"><%= link_to t(:back), {}%></div>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                              <div class="pbBody">
                                <div class="pbSubsection">
                                  <table class="detailList" cellpadding="0" cellspacing="0" border="0">
                                    <tbody>
                                        <tr>
                                          <td class="labelCol"><label><%=(t :label_skm_entry_status_code)%></label></td>
                                          <td class="data2Col">test</td>
                                        </tr>
                                        <tr>
                                          <td class="labelCol"><label><%=(t :name)%></label></td>
                                          <td class="data2Col">test</td>
                                        </tr>
                                        <tr>
                                          <td class="labelCol"><label><%=t(:description)%></label></td>
                                          <td class="data2Col">test</td>
                                        </tr>
                                        <tr>
                                          <td class="labelCol"><label><%=(t :label_skm_entry_status_visiable)%></label></td>
                                          <td class="data2Col"></td>
                                        </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>

                          </td>
                        </tr>
                    </tbody>
                  </table>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>


<script>
Ext.onReady(function() {
    var treeNode = Ext.getDom("tree-div");

    var store = Ext.create('Ext.data.TreeStore', {
        model: "ReportTypeField",
        proxy: {type: 'ajax',url:  treeNode.getAttribute("href")}
    });

    var tree = Ext.create('Ext.tree.Panel', {
        store: store,
        rootVisible: false,
        useArrows: true,
        renderTo: 'tree-div',
        width: 200,
        height: 250,
        dockedItems: [{
            xtype: 'toolbar',
            items: {
                text: 'Get checked nodes',
                handler: function(){
                    var records = tree.getView().getChecked(),
                        names = [];

                    Ext.Array.each(records, function(rec){
                        names.push(rec.get('text'));
                    });

                    Ext.MessageBox.show({
                        title: 'Selected Nodes',
                        msg: names.join('<br />'),
                        icon: Ext.MessageBox.INFO
                    });
                }
            }
        }]
    });
});
</script>