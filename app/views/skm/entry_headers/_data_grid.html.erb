<div class="listRelatedObject setupBlock">
    <div class="page-block">
      <div class="pbHeader">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            <tr>
              <td class="pbTitle">
                <%= render :partial => "irm/common/full_text_search_input",
                           :locals => {:tip_text => t(:tip_skm_entry_header_full_search),
                                       :target_table => "entry_headers_list",
                                       :id => "full_search"} %>
              </td>
              <td id="topButtonRow" class="pbButton">
                <%=render "tab_buttons" %>
              </td>
              <td class="pbHelp">
                <div id="entryHeadersSearchBox"></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="pbBody">
        <table class="split-table">
          <tr>
            <td>
              <%= render :partial =>"/irm/common/tree_sidebar_template", :locals =>{:tree_url => url_for(:controller => "skm/columns", :action=>"get_columns_data", :access => "current", :format=>:json),
                                                             :target_table => "entry_headers_list",
                                                             :tree_id => "tree-div",
                                                             :root_text => t(:label_skm_column_all),
                                                             :li_attrs => "id" } %>
            </td>
            <td>
                <div id="entry_headers_list" class="datatable" style="width:100%">
                  <div id="id" style="display:none">
                    <%= link_to(t(:edit),{:controller => "skm/entry_headers", :action=>"edit",:id=>"{id}"}) %>
                    <span class="display-<%= "{is_favorite}"%>">
                        |&nbsp;<%= link_to(t(:save_page), {:controller => "skm/entry_headers", :action => "add_favorites", :id => "{id}", :person_id => Irm::Person.current.id}) %>
                    </span>
                  </div>
                  <div id="entry_title" style="display:none">
                    var title = '<%= link_to("{entry_title}",{:controller => "skm/entry_headers", :action=>"show",:id=>"{id}"}) %>';
                    if ('{type_code}' == 'VIDEO')
                    {
                        '<%= get_img_icon("video")%>' + title;
                    }
                    else
                    {
                        title;
                    }
                  </div>
                  <div id="doc_number" style="display:none">
                    <%= link_to("{doc_number}",{:controller => "skm/entry_headers", :action=>"show",:id=>"{id}"}) %>
                  </div>
                </div>
                <%= datatable("entry_headers_list",{:action=>"get_data",:column_id => @column_id, :format=>"json"},
                          [{:key=>"id",:label=>t(:operation),:formatter=>"Y.irm.template",:width=>"80px"},
                           {:key=>"published_date_f",:label=>t(:label_skm_entry_header_published_date), :width => "150px"},
                           {:key=>"entry_title",:label=>t(:label_skm_entry_header_title), :searchable => true,:formatter=>"Y.irm.stemplate"},
                           {:key=>"doc_number",:label=>t(:label_skm_entry_header_doc_number), :searchable => true,:formatter=>"Y.irm.template",:width => "100px"},
                           {:key=>"is_favorite", :hidden => true},{:key => "type_code", :hidden => true}],
                           {:search_box => "entryHeadersSearchBox",:force_html => true, :paginator_box=>"entry_headers_list_paginator_box"})%>
                <div id="entry_headers_list_paginator_box"></div>
            </td>
          </tr>
        </table>

      </div>
    </div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
      $("#tree-div").bind('nodeListener',function(event, element){
          var params = {};
          params['column_id'] = element.attr('id');
          var current_target = $("#entry_headers_list").data("datatable").target;
          current_target.data.options.searchOptions = params;
          current_target.loadPage(1);
      });
  });
</script>